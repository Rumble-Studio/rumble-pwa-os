<div class="grants-list-container">
	<div class="header">
		<mat-form-field appearance="outline">
			<mat-label>Filter</mat-label>
			<input
				matInput
				(keyup)="applyFilter($event)"
				#input />
		</mat-form-field>

		<div class="add">
			<button
				mat-raised-button
				(click)="onAddGrant()">
				<mat-icon>add</mat-icon> Add grant
			</button>
		</div>
	</div>

	<table
		#table
		mat-table
		*ngIf="dataSource.data.length; else noDataTpl"
		[dataSource]="dataSource"
		matSort>
		<ng-container matColumnDef="state">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				state
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.state }}
			</td>
		</ng-container>
		<ng-container matColumnDef="id">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				ID
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.id.substring(0, 5) }}
			</td>
		</ng-container>

		<ng-container matColumnDef="timeCreation">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				Creation time
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.timeCreation * 1000 | date: 'yy/MM/dd, HH:mm' }}
			</td>
		</ng-container>

		<ng-container matColumnDef="permission">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				Permission
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.permissionId }}
			</td>
		</ng-container>

		<ng-container matColumnDef="groupId">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				Group
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				<rumble-pwa-group-item-generic
					[matTooltip]="element.groupId"
					[groupId]="element.groupId"></rumble-pwa-group-item-generic>
			</td>
		</ng-container>

		<ng-container matColumnDef="parameters">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				parameters
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.parameters }}
			</td>
		</ng-container>

		<ng-container matColumnDef="details">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				Details
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.details }}
			</td>
		</ng-container>

		<ng-container matColumnDef="methodName">
			<th
				mat-header-cell
				*matHeaderCellDef
				mat-sort-header>
				Methode Name
			</th>
			<td
				mat-cell
				*matCellDef="let element">
				{{ element.methodName }}
			</td>
		</ng-container>

		<tr
			mat-header-row
			*matHeaderRowDef="displayedColumns"></tr>
		<tr
			mat-row
			*matRowDef="let row; columns: displayedColumns; let element"
			[ngClass]="{ deleted: element.state === 'deleted' }"
			(click)="onUpdateGrant(element)"></tr>
		<tr
			class="mat-row"
			*matNoDataRow>
			<td
				class="mat-cell"
				colspan="4">
				No data matching the filter "{{ input.value }}"
			</td>
		</tr>
	</table>

	<mat-paginator
		[pageSizeOptions]="[5, 10, 25, 100]"
		aria-label="Select page of users"
		[pageSize]="10"></mat-paginator>
</div>
<ng-template #noDataTpl>
	<span class="no-data">No grant available</span>
</ng-template>
